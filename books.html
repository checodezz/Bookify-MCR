<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>replit</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"
    defer></script>
</head>

<body>
  <header>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="index.html">Bookish</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
          aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link " aria-current="page" href="index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="books.html">Books</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="facts.html">Facts</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <main class="container">
    <h1>Add a Book</h1>
    <form id="inputForm">
      <label for="titleInput" class="form-label">Title:</label>
      <input type="text" id="titleInput" class="form-control" required><br>
      <label for="authorInput" class="form-label">Author:</label>
      <input type="text" id="authorInput" class="form-control" required><br>

      <label class="form-label">Genre:</label>
      <select id="genreInput" class="form-control">
        <option value="Classic">Classic</option>
        <option value="Science Fiction">Science Fiction</option>
        <option value="Music">Music</option>
        <option value="Magazine">Magazine</option>
        <option value="Technology">Technology</option>
      </select><br>

      <label class="form-label">Media Type:</label>
      <select id="mediaTypeInput" class="form-control">
        <option value="Book">Book</option>
        <option value="DVD">DVD</option>
        <option value="Magazine">Magazine</option>
        <option value="Digital Book">Digital Book</option>
      </select><br>

      <button type="submit" class="btn btn-primary">Add Book</button><br>
    </form><br>

    <div class="row my-3">
      <div class="col-md-6">
        <label class="form-label">Filter by Genre:</label>
        <select id="genreFilter" class="form-control">
          <option value="All">All Books</option>
          <option value="Classic">Classic</option>
          <option value="Science Fiction">Science Fiction</option>
          <option value="Music">Music</option>
          <option value="Magazine">Magazine</option>
          <option value="Technology">Technology</option>
        </select>
      </div>


      <div class="col-md-6">
        <label class="form-label">Filter by Media Type:</label>
        <select id="mediaTypeFilter" class="form-control">
          <option value="All">All </option>
          <option value="Book">Book</option>
          <option value="DVD">DVD</option>
          <option value="Magazine">Magazine</option>
          <option value="Digital Book">Digital Book</option>
        </select>
      </div>
    </div>
    <ul id="unorderedList" class="list-group my-4">

    </ul>
  </main>

  <footer>
    <div class=" text-light text-center bg-dark py-4">
      <p>&copy; 2024 Bookish. All rights reserveed.</p>
    </div>
  </footer>
  <script>
    let libraryData = [
      {
        id: 1,
        title: "The Great Gatsby",
        author: "F. Scott Fitzgerald",
        ISBN: "978-0-7432-7356-5",
        genre: "Classic",
        publicationYear: 1925,
        mediaType: "Book",
        availabilityStatus: "In Stock",
        location: "Fiction Section, Shelf A",
        condition: "Good"
      },
      {
        id: 2,
        title: "The Hitchhiker's Guide to the Galaxy",
        author: "Douglas Adams",
        ISBN: "978-0-345-39180-3",
        genre: "Science Fiction",
        publicationYear: 1979,
        mediaType: "Book",
        availabilityStatus: "Checked Out",
        location: "Science Fiction Section, Shelf B",
        condition: "New"
      },
      {
        id: 3,
        title: "The Beatles Anthology",
        author: "The Beatles",
        ISBN: "978-0811826846",
        genre: "Music",
        publicationYear: 2000,
        mediaType: "DVD",
        availabilityStatus: "On Hold",
        location: "Music Section, Shelf C",
        condition: "Fair"
      },
      {
        id: 4,
        title: "National Geographic",
        author: "Various",
        ISBN: "NG-MAG-2023-001",
        genre: "Magazine",
        publicationYear: 2023,
        mediaType: "Magazine",
        availabilityStatus: "In Stock",
        location: "Periodicals Section, Shelf D",
        condition: "Good"
      },
      {
        id: 5,
        title: "Database Management Essentials",
        author: "Abraham Silberschatz",
        ISBN: "978-0077079611",
        genre: "Technology",
        publicationYear: 2019,
        mediaType: "Digital Book",
        availabilityStatus: "In Stock",
        location: "Technology Section, Shelf E",
        condition: "New"
      },
    ];

    const unorderedList = document.querySelector('#unorderedList');


    function generateCards(libraryData) {

      unorderedList.innerHTML = '';


      for (let i = 0; i < libraryData.length; i++) {

        const liElement = document.createElement('li');
        liElement.className = "list-group-item d-flex justify-content-between align-items-center";

        const division = document.createElement('div');

        const title = document.createElement('h5');
        title.textContent = libraryData[i].title;

        const author = document.createElement('p');
        author.textContent = `Author: ${libraryData[i].author}`

        const genre = document.createElement('p');
        genre.textContent = `Genre: ${libraryData[i].genre}, Media Type: ${libraryData[i].mediaType}`

        const detailsBtn = document.createElement('a');
        detailsBtn.className = "btn btn-primary";
        detailsBtn.textContent = 'Details'
        detailsBtn.href = `bookDetails.html?id=${libraryData[i].id}`

        liElement.appendChild(division);
        division.appendChild(title);
        division.appendChild(author);
        division.appendChild(genre);
        liElement.appendChild(detailsBtn);
        unorderedList.appendChild(liElement);
      }
    }


    const inputForm = document.querySelector('#inputForm');

    inputForm.addEventListener('submit', function () {
      event.preventDefault();
      console.log('clicked');

      const titleInput = document.querySelector('#titleInput');
      const authorInput = document.querySelector('#authorInput');
      const genreInput = document.querySelector("#genreInput");
      const mediaTypeInput = document.querySelector('#mediaTypeInput');

      const newId = libraryData.length + 1;

      const newBookObj = {
        id: newId,
        title: titleInput.value,
        author: authorInput.value,
        genre: genreInput.value,
        mediaType: mediaTypeInput.value
      }

      libraryData.push(newBookObj)
      generateCards(libraryData)
    })


    const genreFilter = document.querySelector('#genreFilter');

    genreFilter.addEventListener('change', applyGenreFilter)

    function applyGenreFilter() {

      const selectedGenre = genreFilter.value;
      let filteredData = [];

      if (selectedGenre === "All") {
        filteredData = libraryData;
      } else {
        for (let i = 0; i < libraryData.length; i++) {
          if (libraryData[i].genre === selectedGenre) {
            // console.log(libraryData[i])
            filteredData.push(libraryData[i])
          }
        }
      }
      console.log(filteredData)
      generateCards(filteredData)
    }


    const mediaTypeFilter = document.querySelector('#mediaTypeFilter');

    mediaTypeFilter.addEventListener('change', function () {

      const selectedMediaType = mediaTypeFilter.value;
      let filteredData = [];
      if (selectedMediaType === "All") {
        filteredData = libraryData;
      } else {
        for (let i = 0; i < libraryData.length; i++) {
          if (selectedMediaType === libraryData[i].mediaType) {
            filteredData.push(libraryData[i])
          }
        }
      }
      generateCards(filteredData)
    })

    generateCards(libraryData)


  </script>
</body>

</html>